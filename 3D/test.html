
<!DOCTYPE html>
<html style='width:100%; height:100%; border:0; margin:0; padding:0;'>
  
    <head>
        <title>three.js webgl - interactive - voxel painter</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="js/jstree/dist/themes/default/style.min.css" />
        <link rel="stylesheet" type="text/css" href="js/jquery-ui-1.11.4/jquery-ui.css"/>
        <link rel="stylesheet" type="text/css" href="js/jquery-ui-1.11.4/jquery-ui.theme.css"/>
        <style type="text/css">
            .list { color: ffff; 
                    font-weight: bold; 
                    font-size: 12px; 
                    z-index: 100;
                    width: 350px; 
                    position: absolute; 
                    top: 0px; 
                    padding: 16px;
            }
            .left { left: 0px; }
            .right { right: 0px;}
            #info {
                color: ffff;
                position: absolute;
                padding: 10px;
                width: 100%;
                text-align: center;
            }
            #changes{
                height: 500px;
                max-height: 500px;
                border-right-style: groove;
                border-bottom-style: groove;
                overflow: auto;
            }
            #docs{
                height: 500px;
                max-height: 500px;
                border-right-style: groove;
                border-bottom-style: groove;
                overflow: auto;
            }
/*            #details{
                height: 500px;
                max-height: 500px;
                border-left-style: groove;
                border-bottom-style: groove;
                overflow: auto;
            }*/
            #slider-vertical{
                top: 300px;
                left: 400px;
                position: absolute;
            }
        </style>
    </head>        

    <body>
        <div class="list left"> 
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#changes" aria-controls="changes" role="tab" data-toggle="tab">SourceCode</a></li>
                <li role="presentation"><a href="#docs" aria-controls="docs" role="tab" data-toggle="tab">Documents</a></li>
            </ul>
            
            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="changes">
                        
                </div>
                <div role="tabpanel" class="tab-pane fade" id="docs">
                    <div class="panel-group" id="doc_list" role="tablist" aria-multiselectable="true">

                    </div>
                </div>
            </div>
        </div>
        <div id="slider-vertical">

        </div>
        <div id="details" class="list right">
        <span>Details</span>
        </div>
        <div id="3d">

        </div>
        <div id="info"><span id="version1">version1</span><span> | </span><span id="version2">version2</span>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <script src="js/jstree/dist/jstree.min.js"></script>

        <script src="js/jquery-ui-1.11.4/jquery-ui.js"></script>

        <script src="js/three/build/three.js"></script>
        <script src="js/three/build/js/controls/OrbitControls.js"></script>
        <script src="js/three/build/js/libs/stats.min.js"></script>
        <script src="js/three/build/js/geometries/TextGeometry.js"></script>
        <script src="js/three/build/js/utils/FontUtils.js"></script>

        <script src="js/three/build/js/fonts/gentilis_bold.typeface.js"></script>
        <script src="js/three/build/js/fonts/gentilis_regular.typeface.js"></script>
        <script src="js/three/build/js/fonts/optimer_bold.typeface.js"></script>
        <script src="js/three/build/js/fonts/optimer_regular.typeface.js"></script>
        <script src="js/three/build/js/fonts/helvetiker_bold.typeface.js"></script>
        <script src="js/three/build/js/fonts/helvetiker_regular.typeface.js"></script>
        <script src="js/three/build/js/fonts/droid/droid_sans_regular.typeface.js"></script>
        <script src="js/three/build/js/fonts/droid/droid_sans_bold.typeface.js"></script>
        <script src="js/three/build/js/fonts/droid/droid_serif_regular.typeface.js"></script>
        <script src="js/three/build/js/fonts/droid/droid_serif_bold.typeface.js"></script>

        <script type="text/javascript" src="js/three/build/draw.js"></script>
        <script type="text/javascript" src="js/three/build/listener.js"></script>
        <script type="text/javascript" src="js/three/build/loader.js"></script>


        <script>
            // main()
            var container, stats;
            var camera, controls, scene, renderer;
            var objects = [], plane, group;
            var cameraPoint;
            var raycaster = new THREE.Raycaster();
            var mouse = new THREE.Vector2(),
            offset = new THREE.Vector3(),
            INTERSECTED, SELECTED;

            //pointer line
            var rightline;
            var leftline;
            var direct_line_material = new THREE.LineBasicMaterial({
                color: 0x000000
            });

            //text
            var text = "C",
                font_height = 2,
                font_size = 15,
                curveSegments = 4,
                bevelThickness = 2,
                bevelSize = 1.5,
                bevelSegments = 3,
                bevelEnabled = true,
                font = "helvetiker", // helvetiker, optimer, gentilis, droid sans, droid serif
                weight = "bold", // normal bold
                style = "normal"; // normal italic

            var fileData, linkData, docData;

            fileData = loadFiles();
            docData = loadDocs();
            //console.log(JSON.stringify(fileData, null, 4));
            init();
            animate();

            //start()
            function init() {

                // HTML DOC
                container = document.getElementById("3d");
                
                //document.body.appendChild( container );

                // create camera
                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.y = 1000;
                //camera.lookAt( new THREE.Vector3() );

                // create scene and add globle light
                scene = new THREE.Scene();
                scene.add( new THREE.AmbientLight( 0x505050 ) );

                // create specific light
                var light = new THREE.SpotLight( 0xffffff, 1.5 );
                light.position.set( 0, 500, 2000 );
                light.castShadow = true;
                light.shadowCameraNear = 200;
                light.shadowCameraFar = camera.far;
                light.shadowCameraFov = 50;
                light.shadowBias = -0.00022;
                light.shadowMapWidth = 2048;
                light.shadowMapHeight = 2048;
                scene.add( light );

                //createVerticalSlider();
                //var size = 500, step = 50; //calculated based on size of dataset
                // create a base
                createBase(fileData);

                createCity(fileData);

               
                // plane = new THREE.Mesh(
                //     new THREE.PlaneBufferGeometry( 2000, 2000, 8, 8 ),
                //     new THREE.MeshBasicMaterial( { visible: false } )
                // );
                // scene.add( plane );

                //var CONTAINER_STYLE = getComputedStyle(container,null);
                //var CONTAINER_WIDTH = parseInt(CONTAINER_STYLE.getPropertyValue('width'));
                // create renderer
                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setClearColor( 0xf0f0f0 );
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );
                //renderer.setSize( CONTAINER_WIDTH, window.innerHeight );
                renderer.sortObjects = false;
                renderer.shadowMap.enabled = true;
                renderer.shadowMap.type = THREE.PCFShadowMap;
                renderer.domElement.style.position = "absolute";
                container.appendChild( renderer.domElement );
                //container.insertBefore(renderer.domElement, container.firstChild);

                // create view control
                controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                controls.target.set (0,10,0);


                document.addEventListener( 'mousemove', onDocumentMouseMove, false );

                // add listener
                window.addEventListener( 'resize', onWindowResize, false );
                //document.addEventListener( 'mousedown', onDocumentMouseDown, false );


                
                // var dir = canvasPosition.sub( camera.position ).normalize();
                // var distance = - camera.position.z / dir.z;
                // var pos = camera.position.clone().add( dir.multiplyScalar( distance ) );
                // paintPoint(pos);
                // var particleMaterialGreen = new THREE.SpriteMaterial( {
                //     color: 0x0000FF,
                // } );
                // cameraPoint = new THREE.Sprite( particleMaterialGreen );
                // var cameraPosition = new THREE.Vector3(camera.x + 10, camera.y + 10, camera.z + 10);
                // cameraPoint.scale.x = cameraPoint.scale.y = 50;
                // cameraPoint.position.copy(cameraPosition);
                // scene.add(cameraPoint);

            }

                    //

            function animate() {

                requestAnimationFrame( animate );

                render();


            }

            function render() {

                controls.update();
                renderer.render( scene, camera );


                // //to canvas space
                // var worldPosition = $('#changes').position();
                // var px = worldPosition.left + $('#changes').width();
                // var py = worldPosition.top + $('#changes').height() / 2;
                
                // //console.log("position: " + px + ", "+ py);
                // xx = ( 168 / window.innerWidth ) * 2 - 1;
                // yy = - ( 44 / window.innerHeight ) * 2 + 1;
                // //console.log("position: " + xx + ", "+ yy);
                // var tmp = new THREE.Vector3(xx, yy, 0.5);
                // tmp.unproject(camera).sub( camera.position ).normalize();
                // //console.log("position: " + tmp.x + ", "+ tmp.y + ", "+ tmp.z);
                // paintPoint(tmp);
            }
            
        </script>

    </body>
 
</html>